### 규칙55 신중하게 최적화하라
***

* 최적화는 좋을 때보다 나쁠 때가 더 많으며, 섣불리 시도하면 더더욱 나쁘다. 성능 때문에 구조적인 원칙을 희생하지 마라.<br>
 **빠른 프로그램이 아닌, 좋은 프로그램을 만들려 노력하라.**
* 설계를 할 때는 성능을 제약할 가능성이 있는 결정들을 피하라. 그리고 API를 설계할 때 내리는 결정들이 성능에 어떤 영향을 끼칠지 생각하라. public 자료형을 변경 가능하게 만들면 쓸데없이 방어적 복사를 많이 해야 할 수 있다. 마찬가지로, 구성(composition) 기법이 적절한 public 클래스에 계승 기법을 적용하면 해당 클래스는 영원히 상위 클래스에 묶이는데, 그 결과로 하위 클래스의 성능에 인위적인 제약이 가해질 수도 있다. 또한 인터페이스가 적당할 API에 구현 자료형을 사용해 버리면 해당 API가 특정한 구현에 종속되므로 나중에 더 빠른 구현이 나와도 개선할 수 없게 된다.
* 프로그램을 신중히 설계한 결과로 명료하고 간결하며 구조가 잘 짜인 구현이 나왔다면, 바로 그때가 최적화를 고민할 시점일 것이다. 물론 그 프로그램의 성능에 만족하지 못한다는 가정하에서. 그리고 **최적화를 시도할 때마다, 전후 성능을 측정하고 비교하라.** 측정 결과를 보고 놀라게 될지도 모른다. 최적화 결과로 성능이 개선되지 않거나 더 나빠지는 일이 많기 때문이다. 그 주된 이유는, 프로그램이 어디에 시간을 쓰고 있는지 추측하기 어렵다는 것이다. 전통적인 정적 컴파일 언어들에 비해, 프로그래머가 작성한 코드와 CPU가 실행하는 코드 사이의 ‘의미론적 차이’가 훨씬 크기 때문에 최적화 결과로 성능이 얼마나 좋아질지 안정적으로 예측하기 어렵다.